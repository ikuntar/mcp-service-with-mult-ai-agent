# MCPæ¡†æ¶ - æ–‡æ¡£ä¸­å¿ƒ

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### ğŸš€ å¿«é€Ÿå…¥é—¨ (å¿…è¯»)
- **[00_å¿«é€Ÿå¼€å§‹.md](00_å¿«é€Ÿå¼€å§‹.md)** - 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- **ä½¿ç”¨å»ºè®®**: æ–°ç”¨æˆ·ä»è¿™é‡Œå¼€å§‹

### ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

#### ç»Ÿä¸€æ‰§è¡Œå™¨æ¶æ„ (v4.0.0 - æ¨è)
- **[08_ç”¨æˆ·ç©ºé—´æ¶æ„è¯´æ˜.md](08_ç”¨æˆ·ç©ºé—´æ¶æ„è¯´æ˜.md)** - æœ€æ–°æ¶æ„ï¼Œ3å±‚è®¾è®¡ï¼Œæ€§èƒ½ä¼˜åŒ–60%
- **[09_å¼‚æ­¥é˜Ÿåˆ—ä¸æ¶ˆæ¯é˜Ÿåˆ—.md](09_å¼‚æ­¥é˜Ÿåˆ—ä¸æ¶ˆæ¯é˜Ÿåˆ—.md)** - å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå’Œæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ
- **[10_é›†æˆAgentæ¶æ„æŒ‡å—.md](10_é›†æˆAgentæ¶æ„æŒ‡å—.md)** - é›†æˆAgentï¼Œæ™ºèƒ½ä½“+ä¼šè¯+æ¨¡å‹ä¸€ä½“åŒ–
- **[03_æ¡†æ¶æ¶æ„æ ¸å¿ƒ.md](03_æ¡†æ¶æ¶æ„æ ¸å¿ƒ.md)** - æ‰§è¡Œå™¨æ¡†æ¶è¯¦è§£ï¼ˆå…¼å®¹v3.1.0ï¼‰

#### æ¶æ„æ¼”è¿›
- **[æ¶æ„æ¼”è¿›è¯´æ˜.md](æ¶æ„æ¼”è¿›è¯´æ˜.md)** - ä»v1.0åˆ°v4.0çš„æ¼”è¿›å†ç¨‹
- **è¯´æ˜**: v3.1.0ä¸v4.0ä½¿ç”¨ç›¸åŒåº•å±‚æ¶æ„ï¼Œv3.1.0æä¾›å…¼å®¹æ¥å£

### ğŸ¨ è®¾è®¡è§„åˆ’ (ä¸´æ—¶/AIè¾…åŠ©)
- **[è®¾è®¡è§„åˆ’/README.md](è®¾è®¡è§„åˆ’/README.md)** - AIè¾…åŠ©è®¾è®¡æ–‡æ¡£å¯¼èˆª
- *ä¸´æ—¶æ–‡ä»¶å¤¹ï¼Œç”¨äºAIè¾…åŠ©è®¾è®¡è¿‡ç¨‹ä¸­çš„æ–‡æ¡£æ•´ç†*

### ğŸ” æƒé™ä¸Token
- **[02_æƒé™æ§åˆ¶è¯¦è§£.md](02_æƒé™æ§åˆ¶è¯¦è§£.md)** - RBACæƒé™æ¨¡å‹
- **[05_Tokenç®¡ç†ç³»ç»Ÿ.md](05_Tokenç®¡ç†ç³»ç»Ÿ.md)** - Tokenç”Ÿå‘½å‘¨æœŸç®¡ç†

### ğŸ› ï¸ å¼€å‘æŒ‡å—
- **[01_å·¥å…·å¼€å‘åŸºç¡€.md](01_å·¥å…·å¼€å‘åŸºç¡€.md)** - å·¥å…·å¼€å‘å…¥é—¨
- **[04_é…ç½®ç³»ç»Ÿä½¿ç”¨.md](04_é…ç½®ç³»ç»Ÿä½¿ç”¨.md)** - é…ç½®ç³»ç»Ÿ
- **[06_æ’ä»¶å¼€å‘æŒ‡å—.md](06_æ’ä»¶å¼€å‘æŒ‡å—.md)** - æ’ä»¶å¼€å‘
- **[07_æ‰§è¡Œå™¨æ¡†æ¶ä½¿ç”¨æŒ‡å—.md](07_æ‰§è¡Œå™¨æ¡†æ¶ä½¿ç”¨æŒ‡å—.md)** - æ‰§è¡Œå™¨æ¡†æ¶

## ğŸ¯ å¿«é€Ÿä¸Šæ‰‹

```bash
# 1. å®‰è£…ç¼–è¯‘
npm install && npm run build

# 2. è¿è¡Œæµ‹è¯•
node test-compilation.js
npx ts-node test-executor-system.ts

# 3. åˆ›å»ºå·¥å…· (3æ­¥)
// 1. å®šä¹‰å·¥å…·
export const myTool: Tool = {
  name: 'my_tool',
  description: 'æˆ‘çš„å·¥å…·',
  groups: ['public', 'basic'],
  inputSchema: { type: 'object', properties: { message: { type: 'string' } } },
  execute: async (args) => ({ content: [{ type: 'text', text: `ç»“æœ: ${args.message}` }] })
};
// 2. æ³¨å†Œå·¥å…·
this.basicToolSet.register(myTool);
// 3. ç¼–è¯‘æµ‹è¯•
npm run build
```

## ğŸ“Š æ¶æ„å¯¹æ¯”

| ç‰¹æ€§ | ç”¨æˆ·ç©ºé—´æ¶æ„(v4) | æ‰§è¡Œå™¨æ¡†æ¶(v3) |
|------|------------------|----------------|
| å±‚æ•° | 3å±‚ | 4å±‚ |
| æ€§èƒ½ | ä¼˜åŒ–60% | æ ‡å‡† |
| åŠŸèƒ½ | è™šæ‹ŸåŒ–+è§„åˆ™+å¯è§æ€§ | è§„åˆ™ç®¡ç† |
| æ¨è | âœ… æ–°é¡¹ç›® | ğŸ”§ å…¼å®¹æ—§é¡¹ç›® |

## ğŸ” æƒé™æ¨¡å‹

```typescript
// è§’è‰² â†’ ç»„æ˜ å°„
user:    ['public', 'basic']
analyst: ['public', 'basic', 'advanced', 'sensitive', 'data-group']
admin:   ['*']  // æ‰€æœ‰ç»„
```

## ğŸ› ï¸ å¯ç”¨å·¥å…· (51ä¸ª)

- **Tokenç®¡ç†** (9ä¸ª): token_create, token_validate, token_info, token_delete, token_deactivate, token_activate, token_renew, token_cleanup, token_stats
- **ç”¨æˆ·ç©ºé—´ç®¡ç†** (14ä¸ª): userspace_get, userspace_set_rules, userspace_get_rules, userspace_set_visible_tools, userspace_check_visibility, userspace_execute_virtualization, userspace_get_virtualization_resources, userspace_set_virtualization_resources, userspace_set_container_config, userspace_stats, userspace_cleanup, userspace_delete, userspace_activate, userspace_update_role
- **æ‰§è¡Œå™¨è§„åˆ™** (5ä¸ª): set_executor_rule, get_executor_rules, delete_executor_rule, set_default_rule, get_default_rule
- **å¼‚æ­¥ä»»åŠ¡ç®¡ç†** (9ä¸ª): register_async_task, submit_async_task, get_async_task_status, get_task_original_call, wait_async_task, get_user_async_tasks, get_async_task_stats, cancel_async_task, delete_async_task
- **æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†** (6ä¸ª): user_publish_message, user_receive_message, user_reply_message, user_get_pending_messages, user_get_message_stats, user_cleanup_expired_messages
- **åŸºç¡€å·¥å…·** (4ä¸ª): echo, add, demo_tool, switch_role
- **æ•°æ®å¤„ç†** (4ä¸ª): data_filter, data_sort, data_transform, data_aggregate
- **æ–‡ä»¶æ“ä½œ** (4ä¸ª): file_read, file_write, file_search, file_clear_cache

## ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿

**v4.0.0 ç”¨æˆ·ç©ºé—´æ¶æ„**:
- æ¶æ„ç®€åŒ–ï¼šä»5å±‚å‡å°‘åˆ°3å±‚ï¼Œå‡å°‘40%
- åŠŸèƒ½é›†æˆï¼šè™šæ‹ŸåŒ–+è§„åˆ™+å¯è§æ€§+é…ç½®ç»Ÿä¸€ç®¡ç†
- æ€§èƒ½ä¼˜åŒ–ï¼šæ‰§è¡Œæµç¨‹ç¼©çŸ­60%
- æ‰©å±•æ€§å¼ºï¼šç”¨æˆ·ç©ºé—´å¯è½»æ¾æ·»åŠ æ–°åŠŸèƒ½

**v3.1.0 æ‰§è¡Œå™¨æ¶æ„**:
- é…ç½®ç®€æ´ï¼šåªéœ€ç»„æ ‡ç­¾å’Œè§’è‰²æƒé™
- æ— å†²çªï¼šç™½åå•æ¨¡å¼é¿å…å†…å¤–å±‚å†²çª
- æ˜“æ‰©å±•ï¼šæ–°å¢å·¥å…·åªéœ€åˆ†é…ç»„æ ‡ç­¾
- Tokenç®¡ç†ï¼šå®Œæ•´çš„Tokenç”Ÿå‘½å‘¨æœŸç®¡ç†

## ğŸ§ª æµ‹è¯•éªŒè¯

| æµ‹è¯•æ–‡ä»¶ | åŠŸèƒ½ | çŠ¶æ€ |
|---------|------|------|
| test-compilation.js | åŸºç¡€ç¼–è¯‘å’Œæ ¸å¿ƒåŠŸèƒ½ | âœ… |
| test-executor-system.ts | æ‰§è¡Œå™¨ç³»ç»Ÿå®Œæ•´æµ‹è¯• | âœ… |
| test-token-executor-integration.ts | Tokenä¸æ‰§è¡Œå™¨é›†æˆ | âœ… |
| test-user-space-architecture.ts | ç”¨æˆ·ç©ºé—´æ¶æ„ | âœ… |

## ğŸ“– å¿«é€ŸæŸ¥æ‰¾

| éœ€è¦ä»€ä¹ˆï¼Ÿ | å»å“ªé‡Œæ‰¾ï¼Ÿ |
|-----------|-----------|
| åˆ›å»ºæ–°å·¥å…· | 01_å·¥å…·å¼€å‘åŸºç¡€.md |
| æƒé™é—®é¢˜ | 02_æƒé™æ§åˆ¶è¯¦è§£.md |
| æ¡†æ¶æ¶æ„ | 03_æ¡†æ¶æ¶æ„æ ¸å¿ƒ.md |
| é…ç½®ç³»ç»Ÿ | 04_é…ç½®ç³»ç»Ÿä½¿ç”¨.md |
| Tokenç®¡ç† | 05_Tokenç®¡ç†ç³»ç»Ÿ.md |
| æ’ä»¶å¼€å‘ | 06_æ’ä»¶å¼€å‘æŒ‡å—.md |
| æ‰§è¡Œå™¨æ¡†æ¶ | 07_æ‰§è¡Œå™¨æ¡†æ¶ä½¿ç”¨æŒ‡å—.md |
| ç”¨æˆ·ç©ºé—´æ¶æ„ | 08_ç”¨æˆ·ç©ºé—´æ¶æ„è¯´æ˜.md |
| æ¶æ„æ¼”è¿› | æ¶æ„æ¼”è¿›è¯´æ˜.md |

## âš ï¸ å…³é”®æç¤º

**å¿…é¡»éµå®ˆ**:
1. å·¥å…·å¿…é¡»æœ‰groupsæ ‡ç­¾
2. å‚æ•°å¿…é¡»éªŒè¯
3. è¿”å›ToolResultæ ¼å¼
4. æ³¨å†Œåˆ°æ­£ç¡®å®¹å™¨

**å¸¸è§é”™è¯¯**:
1. å·¥å…·ä¸å¯è§ â†’ æ£€æŸ¥groupsæ ‡ç­¾å’Œè§’è‰²æƒé™
2. æƒé™æ‹’ç» â†’ ç¡®è®¤è§’è‰²çš„allowedGroupsåŒ…å«å·¥å…·groups
3. å‚æ•°é”™è¯¯ â†’ ä¸¥æ ¼éªŒè¯è¾“å…¥å‚æ•°
4. ç¼–è¯‘å¤±è´¥ â†’ æ£€æŸ¥ç±»å‹å®šä¹‰å’Œå¯¼å…¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: v4.0.0 | **æœ€åæ›´æ–°**: 2025-12-27 | **ç»´æŠ¤çŠ¶æ€**: âœ… æ´»è·ƒ